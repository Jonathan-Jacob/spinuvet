<%= render Spina::UserInterface::HeaderComponent.new do |header| %>
  <% header.actions do %>
    <%= render Spina::UserInterface::TranslationsComponent.new(@account, label: @locale.upcase) %>
  <% end %>
<% end %>
<div class="pt-6 pb-4 px-8">
  <h2 class="block leading-5 font-medium text-gray-700"><%= t('spina.ingredients.old_ingredients') %></h2>
</div>
<div class="mt-4 mb-6 mx-8 rounded-md border border-solid border-gray-400">
  <% @ingredients.each do |ingredient| %>
    <%= link_to edit_admin_ingredient_path(ingredient, locale: @locale), class: "hover:bg-spina-light odd:bg-gray-200 first:rounded-t-md last:rounded-b-md" do %>
      <div class="py-4 p-8 text-gray-700 flex justify-between flex-wrap gap-2 bg-inherit rounded-inherit">
        <div><%= ingredient.ingredient_name(@locale) %></div>
        <div class="flex gap-2">
          <% Spina.locales.each do |locale| %>
            <% if ingredient.json_attributes["#{locale}_content"].present? %>
              <% if ingredient.json_attributes["#{locale}_content"]["name"].present? && ingredient.json_attributes["#{locale}_content"]["description"].present? %>
                <div class="px-2 py-1 text-xs rounded-md bg-spina text-white"><%= "#{locale.upcase}" %></div>
              <% elsif ingredient.json_attributes["#{locale}_content"]["name"].present? || ingredient.json_attributes["#{locale}_content"]["description"].present? %>
                <div class="px-2 py-1 text-xs rounded-md bg-amber-400"><%= "#{locale.upcase}" %></div>
              <% else %>
                <div class="px-2 py-1 text-xs rounded-md bg-red-600 text-white"><%= "#{locale.upcase}" %></div>
              <% end %>
            <% else %>
              <div class="px-2 py-1 text-xs rounded-md bg-red-600 text-white"><%= "#{locale.upcase}" %></div>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
<div class="py-4 p-8 font-medium text-gray-700">
  <%= link_to t('spina.ingredients.new_ingredient'), new_admin_ingredient_path(locale: @locale), class: "btn btn-primary w-fit" %>
</div>
